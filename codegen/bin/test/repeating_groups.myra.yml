namespace: "express.mvp.myra.codec.test.repeating"
version: "1.0.0"

enums:
  - name: "Side"
    type: "int8"
    values:
      - name: "BUY"
        id: 0
      - name: "SELL"
        id: 1

messages:
  # Simple message with only primitive repeated fields (inline encoding)
  - name: "PriceList"
    fields:
      - tag: 1
        name: "instrumentId"
        type: "int32"
      - tag: 2
        name: "prices"
        type: "int64"
        repeated: true

  # Message with repeated primitives of different sizes
  - name: "MultiPrimitiveList"
    fields:
      - tag: 1
        name: "id"
        type: "int64"
      - tag: 2
        name: "byteValues"
        type: "int8"
        repeated: true
      - tag: 3
        name: "shortValues"
        type: "int16"
        repeated: true
      - tag: 4
        name: "intValues"
        type: "int32"
        repeated: true
      - tag: 5
        name: "longValues"
        type: "int64"
        repeated: true
      - tag: 6
        name: "floatValues"
        type: "float32"
        repeated: true
      - tag: 7
        name: "doubleValues"
        type: "float64"
        repeated: true
      - tag: 8
        name: "boolValues"
        type: "bool"
        repeated: true

  # Message with repeated enum (fixed-size, uses inline encoding)
  - name: "OrderSides"
    fields:
      - tag: 1
        name: "orderId"
        type: "int64"
      - tag: 2
        name: "sides"
        type: "Side"
        repeated: true

  # Nested message for use in repeated groups
  - name: "Level"
    fields:
      - tag: 1
        name: "priceNanos"
        type: "int64"
      - tag: 2
        name: "size"
        type: "int32"
      - tag: 3
        name: "orderCount"
        type: "int32"

  # Message with repeated nested messages (variable-size, uses offset table)
  - name: "OrderBook"
    fields:
      - tag: 1
        name: "symbol"
        type: "string"
        fixedCapacity: 8
      - tag: 2
        name: "timestamp"
        type: "int64"
      - tag: 3
        name: "bids"
        type: "Level"
        repeated: true
      - tag: 4
        name: "asks"
        type: "Level"
        repeated: true

  # Message with repeated strings (variable-size, uses offset table)
  - name: "TagList"
    fields:
      - tag: 1
        name: "entityId"
        type: "int64"
      - tag: 2
        name: "tags"
        type: "string"
        repeated: true

  # Message with repeated bytes (variable-size, uses offset table)
  - name: "BlobList"
    fields:
      - tag: 1
        name: "id"
        type: "int32"
      - tag: 2
        name: "blobs"
        type: "bytes"
        repeated: true

  # Complex message with mixed repeated fields
  - name: "MarketDataSnapshot"
    fields:
      - tag: 1
        name: "symbol"
        type: "string"
        fixedCapacity: 8
      - tag: 2
        name: "timestamp"
        type: "int64"
      - tag: 3
        name: "isTrading"
        type: "bool"
      # Repeated primitives (inline)
      - tag: 4
        name: "tradePrices"
        type: "int64"
        repeated: true
      - tag: 5
        name: "tradeVolumes"
        type: "int32"
        repeated: true
      # Repeated nested messages (offset table)
      - tag: 6
        name: "levels"
        type: "Level"
        repeated: true
      # Repeated strings (offset table)
      - tag: 7
        name: "notes"
        type: "string"
        repeated: true
        optional: true

  # Optional repeated field
  - name: "OptionalList"
    fields:
      - tag: 1
        name: "id"
        type: "int64"
      - tag: 2
        name: "values"
        type: "int32"
        repeated: true
        optional: true
